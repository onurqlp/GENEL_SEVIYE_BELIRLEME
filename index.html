<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AYDA Ankara Yabancı Dil Akademisi - Almanca Genel Seviye Belirleme Sınavı</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
            box-sizing: border-box;
            background-color: white;
        }
        header {
            padding: 10px;
            background-color: #B22222; /* Üst şerit bordo */
            text-align: center;
            color: white;
        }
        header h1, header h2, header p {
            margin: 5px 0;
        }
        header img {
            width: 30px;
            vertical-align: middle;
        }
        header.small {
            padding: 5px;
            font-size: 0.8em;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        header.small p {
            margin-left: 10px;
        }
        .container {
            max-width: 1400px; /* Daha geniş ekran desteği için genişlik artırıldı */
            margin: 0 auto;
            padding: 10px;
        }
        iframe {
            width: 125%; /* Büyük ekranlar için genişlik artırıldı */
            height: 787px;
            margin-left: -4.5cm; /* %5 daha büyük ve sola kaydırıldı */
        }
        .hidden {
            display: none;
        }
        #instruction {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background-color: #B22222;
            color: white;
            padding: 10px;
            border-radius: 5px;
        }
        #instruction.red {
            color: red;
            background-color: white;
            font-weight: bold;
        }
        .personal-id {
            font-size: 1.2em;
            margin: 5px 0;
            background-color: #eee;
            padding: 8px;
            border: 1px solid #ddd;
            display: inline-block;
        }
        #form-submitted-message {
            color: green;
            font-size: 1em;
            margin-top: 10px;
        }
        form {
            margin-bottom: 5px;
        }
        label {
            margin-right: 10px;
        }
        input[type="text"],
        input[type="tel"],
        input[type="email"] {
            margin-right: 10px;
            padding: 5px;
            font-size: 1em;
        }
        #timer {
            font-size: 1.5em;
            color: red;
            margin-top: 5px; /* Boşluklar azaltıldı */
        }
        footer {
            padding: 5px;
            background-color: #B22222; /* Footer bordo */
            color: white;
            font-size: 0.7em;
            margin-top: 10px;
        }
        .guide-message {
            color: red;
            position: fixed;
            bottom: 10px;
            left: 10px;
            background-color: lightgray;
            padding: 5px;
            border-radius: 3px;
        }
        .alert-message {
            margin-top: 10px;
            font-size: 1.1em;
            color: #28a745;
            font-weight: bold;
        }

        /* Medya Sorguları */
        /* Tabletler için */
        @media only screen and (max-width: 1024px) {
            iframe {
                width: 100%; /* Tablet ekranlarında genişlik %100 */
                height: 700px; /* Yükseklik ayarlandı */
                margin-left: 0; /* Sola kaydırma kaldırıldı */
            }
        }

        /* Telefonlar için */
        @media only screen and (max-width: 768px) {
            iframe {
                width: 100%; /* Telefon ekranlarında genişlik %100 */
                height: 500px; /* Yükseklik daha da küçültüldü */
                margin-left: 0; /* Sola kaydırma kaldırıldı */
            }
        }
    </style>
</head>
<body>

    <header id="page-header">
        <h1>AYDA <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTH9d9Ib6rbgzHkNztQ4lQaEqKkxcpNW7yZfA&s" alt="Kitap Simgesi"></h1>
        <h2>Ankara Yabancı Dil Akademisi</h2>
        <p>Telefon: +90 (312) 123 45 67</p>
        <p>E-posta: info@aydaakademi.com</p>
    </header>

    <!-- Bilgi Formu -->
    <div class="container" id="form-container">
        <h2>ALMANCA GENEL SEVİYE BELİRLEME SINAVI</h2>
        <h2>Teste Başlamak için Bilgilerinizi Girin</h2>
        <form id="userForm">
            <label for="name">Ad Soyad:</label>
            <input type="text" id="name" name="name" required><br><br>
            <label for="phone">Telefon:</label>
            <input type="tel" id="phone" name="phone" required><br><br>
            <label for="email">E-posta:</label>
            <input type="email" id="email" name="email" required><br><br>

            <!-- Opsiyonel WhatsApp Grup adı alanı -->
            <label for="whatsapp">Katıldığınız kursun WhatsApp Grup adı (Opsiyonel):</label>
            <input type="text" id="whatsapp" name="whatsapp"><br><br>

            <button type="submit">Teste Başla</button>
        </form>
        <div id="form-submitted-message" class="hidden"> Test başlıyor.</div>
    </div>

    <!-- Test ve Form -->
    <div class="container hidden" id="test-container">
        <iframe id="testIframe" src="https://einstufungstests.klett-sprachen.de/eks/DaF-A1-C1/"></iframe>

        <!-- Geri Sayım -->
        <div id="timer">120:00</div>

        <div id="instruction" class="hidden red">
            Başlamak ve sorular arasında geçiş yapmak için sayfanın köşesindeki kırmızı ZURÜCK & WEITER tuşunu kullanın.
        </div>

        <div id="result-section" class="hidden">
            <form action="https://formspree.io/f/2136kj" method="POST" id="resultForm">
                <label for="name">Ad Soyad:</label>
                <input type="text" id="formName" name="name" required>

                <label for="result">Test Sonucu:</label>
                <input type="text" id="result" name="result" required>

                <label for="personalId">Kişisel ID:</label>
                <input type="text" id="generatedPersonalId" name="personalId" required readonly>

                <button type="submit">Sonucu Gönder</button>
            </form>
        </div>

        <!-- Eğer opsiyonel alan doldurulmadıysa mesaj göster -->
        <div id="alert-message" class="alert-message hidden">
            Lütfen adınıza oluşturulmuş bu Kişisel ID'yi bize gönderin ve indirim ile detaylı bilgilendirme alın.
        </div>
    </div>

    <!-- Sol alt köşede kısa rehber mesaj -->
    <div class="guide-message hidden" id="guide-message">
        Sorular arasında geçiş için ZURÜCK & WEITER tuşunu kullanın.
    </div>

    <footer>
        <div class="container">
            <p>© 2024 AYDA Ankara Yabancı Dil Akademisi. Tüm hakları saklıdır.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        const userForm = document.getElementById('userForm');
        const formContainer = document.getElementById('form-container');
        const testContainer = document.getElementById('test-container');
        const header = document.getElementById('page-header');
        const instruction = document.getElementById('instruction');
        const resultSection = document.getElementById('result-section');
        const formNameInput = document.getElementById('formName');
        const personalIdInput = document.getElementById('generatedPersonalId');
        const formSubmittedMessage = document.getElementById('form-submitted-message');
        const whatsappInput = document.getElementById('whatsapp');
        const alertMessage = document.getElementById('alert-message');
        const timerElement = document.getElementById('timer');
        const phoneInput = document.getElementById('phone');

        let generatedPersonalId = '';
        let countdown;

        // Rastgele Kişisel ID üretimi
        function generatePersonalId() {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let id = '';
            for (let i = 0; i < 5; i++) {
                id += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            return id;
        }

        // Geri sayım başlatma fonksiyonu
        function startCountdown(duration) {
            let timeRemaining = duration; // 120 dakika = 7200 saniye
            countdown = setInterval(function () {
                let minutes = Math.floor(timeRemaining / 60);
                let seconds = timeRemaining % 60;

                // Tek haneli saniyeleri 0 ile doldur
                seconds = seconds < 10 ? '0' + seconds : seconds;

                // Geri sayım metnini güncelle
                timerElement.textContent = `${minutes}:${seconds}`;

                // Zaman dolduğunda geri sayımı durdur
                if (timeRemaining <= 0) {
                    clearInterval(countdown);
                    showThanksMessage();
                }

                timeRemaining--;
            }, 1000); // Her 1 saniyede bir güncelle
        }

        // Kullanıcı formunu gönderdiğinde test başlasın
        userForm.addEventListener('submit', function(event) {
            event.preventDefault(); // Formun gönderimini durdur
            
            // Telefon numarası ve rastgele Kişisel ID üret
            const phoneNumber = phoneInput.value.replace(/\D/g, ''); // Telefon numarasından harfleri çıkar
            const randomId = generatePersonalId();
            const fullId = `${phoneNumber}_${randomId}`;
            personalIdInput.value = fullId; // ID'yi input kutusuna yaz

            // Form bilgilerini test sonu formuna aktaralım
            formNameInput.value = document.getElementById('name').value;

            // Form gönderildi uyarısı göster
            formSubmittedMessage.classList.remove('hidden');

            // Eğer WhatsApp grup adı alanı boş bırakıldıysa, özel mesaj göster
            if (whatsappInput.value.trim() === "") {
                alertMessage.classList.remove('hidden');
            }

            // Formu gizle, test iframe'ini ve sonucu göster
            setTimeout(function() {
                formContainer.classList.add('hidden');
                testContainer.classList.remove('hidden');
                instruction.classList.remove('hidden'); // Yeşil mesajı göster

                // Üst bilgiyi küçült ve yan yana diz
                header.classList.add('small');
                header.innerHTML = '<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTH9d9Ib6rbgzHkNztQ4lQaEqKkxcpNW7yZfA&s" alt="Kitap Simgesi">' + 
                    '<p>AYDA Ankara Yabancı Dil Akademisi | Telefon: +90 (312) 123 45 67 | E-posta: info@aydaakademi.com</p>';

                // Geri sayımı başlat (120 dakika)
                startCountdown(120 * 60); // 120 dakikayı saniyeye çevirdim

                // Kişisel ID ve sonuç formunu hemen göster
                showResultSection();
            }, 2000); // 2 saniye sonra formu gizle ve teste başla
        });

        // Sonuç ve Kişisel ID göster
        function showResultSection() {
            resultSection.classList.remove('hidden');
        }

        // Test süresi bitince "Teşekkürler" mesajını gösterelim
        function showThanksMessage() {
            document.getElementById('thanksMessage').classList.remove('hidden');
        }
    </script>

</body>
</html>
